<div ng-include="'templates/admin/adminNavBar.htm'"></div>

<div class="container">
	<div class="row">
		<div class="col-lg-3">
			
									<!--Search Panel-->
									
			<div class="panel panel-default">
				<div class="panel-heading">
					<i class="fa fa-bell fa-fw"></i> Users Search Panel
				</div>
				<div class="panel-body">
					<form class="form">
						<div class="form-group">
						<label class="radio-inline"><input type="radio" ng-model="userTypeView" value="company"  >Company</label>
						<label class="radio-inline"><input type="radio" ng-model="userTypeView" value="customer" >Customer</label>
						</div>
						<div class="form-group">
						<button class="btn btn-primary" ng-click="viewUsers()">submit</button>
						</div>
					</form>
				</div>
			</div>
			
										<!--Search Results-->
										
			<div class="panel panel-default" ng-show="showSearchResults">
					<div class="panel-heading">
						<i class="fa fa-bell fa-fw"></i>  {{numberOfUsers}} users found
					</div>
					<div class="panel-body">
						<div class="list-group">
							<a ng-repeat="x in users" ng-click="displayUser(x.id, $index)" href="" class="list-group-item">{{ x.name }}</a>
						</div>
						
					</div>
				</div>
				
			
				
				
		</div>
								<!--User Details Panel-->
								
			<div class="col-lg-4">
				<div class="panel panel-default" ng-show="showUserDetails">
					<div class="panel-heading">
					<i class="fa fa-bell fa-fw"></i> {{user.name}}
					<div class="pull-right">
						<div class="dropdown">
							<button class="btn btn-default btn-xs dropdown-toggle"
								type="button" id="menu1" data-toggle="dropdown">
								Actions <span class="caret"></span>
							</button>
							<ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
								<li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="editPassword()">edit password</a></li>
								<li ng-show="userType=='company'" role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="editEmail()">edit email</a></li>
								<li role="presentation" class="divider"></li>
								<li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="deleteUser(user.id)">delete</a></li>
							</ul>
						</div>
					</div>
				</div>
				
					<div ng-show="editShow==2">
						<div class="panel-body">
							<ul class="list-group">
								<li class="list-group-item"><strong>ID: </strong>{{user.id}}</li>
								<li class="list-group-item"><strong>Password: </strong>{{user.password}}</li>
								<li class="list-group-item"><strong>Email: </strong>{{user.email}}</li>
							</ul>
						</div>
					</div>
					
											<!--Password update-->
					
					<div ng-show="editShow==3">
					<div class="panel-body">
								<h4> Update Password</h4>
						<form name="updatePasswordForm" novalidate>
							<div class="form-group">
								<input type="text" class="form-control" name="password" ng-model="newPassword" required ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,12}$/">
								<span style="color:red" ng-show="updatePasswordForm.password.$error.pattern" >*must be 6-12 characters, at least 1 uppercase, 1 lowercase, and 1 digit</span>
							</div>
							<div class="form-group">
								<button class="btn btn-primary btn-sm" ng-click="updatePassword(updatePasswordForm.password.$error.required, updatePasswordForm.password.$error.pattern)">Update</button>
								<button class="btn btn-default btn-sm" ng-click="editShow=2">Cancel</button>
							</div>
						</form>
					</div>
					</div>
					
											<!--Email update-->
											
					<div ng-show="editShow==4">
						<div class="panel-body">
						<form name="updateEmailForm" novalidate>
							<div class="form-group">
								<h4> Update Email</h4>
								<input type="text" name="email" class="form-control" ng-model="newEmail" required ng-pattern="/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/">
								<span style="color:red" ng-show="updateEmailForm.email.$error.pattern" >*illegal email address </span>
							</div>
							<div class="form-group">
								<button class="btn btn-primary btn-sm" ng-click="updateEmail(updateEmailForm.email.$error.required, updateEmailForm.email.$error.pattern)">Update</button>
								<button class="btn btn-default btn-sm" ng-click="editShow=2">Cancel</button>
							</div>
						</form>
					</div>
					
				</div>
				</div>
			</div>
	</div>


</div>